buildscript {
    repositories {
        jcenter()
        mavenCentral()

    maven {
      url 'https://plugins.gradle.org/m2/'
    }
  }

    dependencies {
        classpath 'gradle.plugin.com.matthewprenger:CurseGradle:1.3.0'
    }
}

apply plugin: 'com.matthewprenger.cursegradle.CurseGradlePlugin'

curseforge {

    apiKey = System.getenv('authCurse') ? System.getenv('authCurse') : '0';
    def versions = System.getenv('curseVersions').split(', ')

    project {
        id = "${id_curse}"
        releaseType = 'alpha'
        changelog = getGitChangelog
        changelogType = 'markdown'

        versions.each {
            addGameVersion "${it}"
        }

        if (System.getEnv('curseRequirements')) {

            def requirements = System.getenv('curseRequirements').split(', ')

            mainArtifact(jar) {
                relations {
                    requirements.each {
                        requiredLibrary "${it}"
                    }
                }
            }
        }

        addArtifact(sourcesJar)
        addArtifact(javadocJar)
        addArtifact(deobfJar)
    }
}
